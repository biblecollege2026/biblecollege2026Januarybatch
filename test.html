<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bible College of India - Pastors Foundation Course</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <style>
        /* Base styles remain same as your 10(1).html */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Georgia', 'Times New Roman', serif; background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 12px; box-shadow: 0 20px 60px rgba(0,0,0,0.4); overflow: hidden; }
        .header { background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); color: white; padding: 40px 30px; text-align: center; border-bottom: 5px solid #ffd700; }
        .login-section { padding: 60px 40px; }
        .login-box { max-width: 450px; margin: 0 auto; background: white; padding: 45px; border-radius: 12px; border: 3px solid #1e3c72; }
        input[type="email"] { width: 100%; padding: 15px; border: 2px solid #ddd; border-radius: 8px; margin-bottom: 20px; }
        button { width: 100%; padding: 16px; background: #1e3c72; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; }
        
        .pdf-selection, .pdf-viewer { display: none; padding: 40px; background: #f8f9fa; }
        .pdf-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        .pdf-card { background: white; padding: 35px; border-radius: 12px; border: 3px solid #e0e0e0; text-align: center; }
        .canvas-wrapper { background: white; padding: 30px; border-radius: 10px; overflow: auto; max-height: 85vh; }
        #pdf-canvas { display: block; margin: 0 auto; max-width: 100%; }

        /* SECURITY & PRINT LOGIC */
        #print-container { display: none; }

        @media print {
            @page { size: A4; margin: 0; }
            
            /* Hide the website UI entirely */
            body > *:not(#print-container):not(.print-shield) {
                display: none !important;
            }
            
            #print-container {
                display: block !important;
                position: absolute !important;
                top: 0; left: 0; width: 100% !important;
            }
            
            .print-page {
                display: block !important;
                page-break-after: always !important;
                width: 100% !important;
            }

            /* THE SHIELD: Makes "Save as PDF" blank */
            .print-shield {
                display: block !important;
                position: fixed !important;
                top: 0; left: 0; width: 100% !important;
                height: 100% !important;
                background: white !important;
                z-index: 9999 !important;
                opacity: 0.01 !important;
            }
        }
        .print-shield { display: none; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Bible College of India</h1>
            <p>Pastors Foundation Course Materials</p>
        </div>

        <div id="loginSection" class="login-section">
            <div class="login-box">
                <input type="email" id="studentEmail" placeholder="student@biblecollege.edu">
                <button onclick="verifyAccess()">Access Course Materials</button>
            </div>
        </div>

        <div id="pdfSelection" class="pdf-selection">
            <h2 style="text-align:center; margin-bottom:20px;">üìö Select Study Material</h2>
            <div class="pdf-cards">
                <div class="pdf-card"><h3>‡§â‡§§‡•ç‡§™‡§§‡•ç‡§§‡•Ä</h3><button onclick="openPDF(1)">View</button></div>
                <div class="pdf-card"><h3>‡§®‡§ø‡§∞‡•ç‡§ó‡§Æ</h3><button onclick="openPDF(2)">View</button></div>
            </div>
        </div>

        <div id="pdfViewer" class="pdf-viewer">
            <button onclick="backToSelection()">‚¨ÖÔ∏è Back</button>
            <div id="currentPdfTitle" style="margin:20px 0; font-weight:bold;"></div>
            <button id="printBtn" onclick="printPDF()" style="margin-bottom:20px; background:#4caf50;">üñ®Ô∏è Print Securely</button>
            <div class="canvas-wrapper"><canvas id="pdf-canvas"></canvas></div>
        </div>
    </div>

    <div id="print-container"></div>

    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        const ALLOWED_EMAILS = { 'jlibiblecollege@gmail.com': 'Admin', 'nutandaniel7@gmail.com': 'Nutan' };
        const PDF_FILE_PATH = { 
            1: { file: '‡§â‡§§‡•ç‡§™‡§§‡•ç‡§§‡•Ä.pdf', title: '‡§â‡§§‡•ç‡§™‡§§‡•ç‡§§‡•Ä' },
            2: { file: '‡§®‡§ø‡§∞‡•ç‡§ó‡§Æ.pdf', title: '‡§®‡§ø‡§∞‡•ç‡§ó‡§Æ' }
        };

        let pdfDoc = null;
        let currentPdfId = null;
        const canvas = document.getElementById('pdf-canvas');
        const ctx = canvas.getContext('2d');

        function verifyAccess() {
            const email = document.getElementById('studentEmail').value.trim().toLowerCase();
            if (ALLOWED_EMAILS[email]) {
                document.getElementById('loginSection').style.display = 'none';
                document.getElementById('pdfSelection').style.display = 'block';
            }
        }

        function openPDF(id) {
            currentPdfId = id;
            document.getElementById('pdfSelection').style.display = 'none';
            document.getElementById('pdfViewer').style.display = 'block';
            pdfjsLib.getDocument(PDF_FILE_PATH[id].file).promise.then(pdf => {
                pdfDoc = pdf;
                renderPage(1);
            });
        }

        function renderPage(num) {
            pdfDoc.getPage(num).then(page => {
                const viewport = page.getViewport({scale: 1.5});
                canvas.height = viewport.height;
                canvas.width = viewport.width;
                page.render({canvasContext: ctx, viewport: viewport});
            });
        }

        async function printPDF() {
            const printBtn = document.getElementById('printBtn');
            printBtn.disabled = true;
            printBtn.textContent = '‚è≥ Processing...';

            const printContainer = document.getElementById('print-container');
            printContainer.innerHTML = '';
            
            // Create the Security Shield
            const shield = document.createElement('div');
            shield.className = 'print-shield';
            document.body.appendChild(shield);

            try {
                for (let i = 1; i <= pdfDoc.numPages; i++) {
                    const page = await pdfDoc.getPage(i);
                    const viewport = page.getViewport({scale: 2.0});
                    const pCanvas = document.createElement('canvas');
                    pCanvas.width = viewport.width; pCanvas.height = viewport.height;
                    await page.render({canvasContext: pCanvas.getContext('2d'), viewport: viewport}).promise;
                    
                    const img = document.createElement('img');
                    img.src = pCanvas.toDataURL('image/png');
                    img.className = 'print-page';
                    printContainer.appendChild(img);
                }

                printContainer.style.display = 'block';

                // Delay to paint images, then print, then SELF-DESTRUCT
                setTimeout(() => {
                    window.print();
                    
                    setTimeout(() => {
                        // SELF-DESTRUCT: Clear all print data from memory
                        printContainer.innerHTML = '';
                        printContainer.style.display = 'none';
                        if (document.body.contains(shield)) document.body.removeChild(shield);
                        printBtn.disabled = false;
                        printBtn.textContent = 'üñ®Ô∏è Print Securely';
                    }, 1000);
                }, 1000);
            } catch (e) {
                printBtn.disabled = false;
            }
        }

        function backToSelection() {
            document.getElementById('pdfViewer').style.display = 'none';
            document.getElementById('pdfSelection').style.display = 'block';
        }
    </script>
</body>
</html>
